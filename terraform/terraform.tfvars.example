# =============================================================================
# Secure AWS Infrastructure - Terraform Variables Example
# =============================================================================
# Copy this file to terraform.tfvars and customize with your values
# This infrastructure deploys:
#   - VPC with public/private subnets
#   - ALB + Auto Scaling Group (web servers)
#   - ECS Fargate Ghost blog
#   - CloudWatch monitoring
#   - Optional: Prometheus + Grafana observability stack
# =============================================================================

# General Configuration
environment = "prod"
aws_region  = "us-east-1"

# GitHub OIDC Configuration (for GitHub Actions CI/CD)
github_repo            = "your-org/your-repo"  # Format: owner/repo
terraform_state_bucket = "your-terraform-state-bucket"
terraform_lock_table   = "terraform-locks"

# VPC Configuration
vpc_cidr             = "10.0.0.0/16"
public_subnet_count  = 2  # Number of public subnets (recommended: 2)
private_subnet_count = 2  # Number of private subnets (recommended: 2)
enable_nat_gateway   = true
single_nat_gateway   = true   # Set to false for HA (one NAT per AZ, higher cost)
enable_vpc_flow_logs = true   # Enable VPC Flow Logs for security auditing

# ALB + Auto Scaling Group Configuration
instance_type  = "t3.micro"  # Instance type for ASG web servers

# Storage Configuration
root_volume_size = 20    # GB
root_volume_type = "gp3" # gp3 recommended for better performance/cost

# SSL/TLS Certificate Configuration
# REQUIRED: Provide ACM certificate ARN for HTTPS
# This certificate is used for both main ALB and Ghost blog ALB
acm_certificate_arn = "arn:aws:acm:REGION:ACCOUNT_ID:certificate/CERT_ID"

# Ghost Blog Configuration (ECS Fargate)
ghost_domain_name = "blog.example.com"  # Your Ghost blog domain
ghost_image       = "ghost:latest"      # Docker image (ghost:latest or specific version)

# Monitoring Configuration (CloudWatch)
log_retention_days       = 30     # Days to retain logs
create_sns_topic         = false  # Set to true to create SNS topic for alarms
alarm_email_endpoints    = []     # Example: ["devops@example.com"]
cpu_threshold            = 80     # CPU alarm threshold (%)
memory_threshold         = 80     # Memory alarm threshold (%)
disk_threshold           = 80     # Disk alarm threshold (%)
enable_memory_monitoring = true
create_dashboard         = true   # Create CloudWatch dashboard

# Observability Configuration (Prometheus + Grafana) - OPTIONAL
enable_observability      = false  # Set to true to deploy Prometheus/Grafana
grafana_domain_name       = "grafana.example.com"
grafana_certificate_arn   = "arn:aws:acm:REGION:ACCOUNT_ID:certificate/CERT_ID"  # Separate cert for Grafana (optional)
# SECURITY: Set grafana_admin_password in terraform.tfvars (NOT in this example file)
# grafana_admin_password is required if enable_observability = true
prometheus_retention_days = 15  # Days to retain Prometheus metrics

# Common Resource Tags
tags = {
  Project     = "Secure AWS Infrastructure"
  Owner       = "DevOps Team"
  Environment = "Production"
  ManagedBy   = "Terraform"
  CostCenter  = "Engineering"
  Compliance  = "SOC2"
}
